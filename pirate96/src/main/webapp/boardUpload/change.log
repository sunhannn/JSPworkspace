1/25 
요개논물 데이터 베이스 설계
메모장에서 찾기

*주 식별자는 최대한 변화가 없는 걸로 정하기
주 식별자 : 겹치지말아야하는 정보
외래식별자 : 다른 곳의 주 식별자가 되어야 하는거?

개념적 설계 er 다이어그램 엔티티-객체 객체의 속성 attribute
객체(엔티티 entity)는 사각형으로 표현 -테이블의 개념적 표현
상품이라면 음료 가격 원산지 유통기한을 타원형에 넣음
속성(COLUNM)을 타원으로 표현
상품정보 타원형 겹치지 말아야함 얘가 주 식별자 primary key
다중값 표현 타원 두개 겹치기 왜 ?
회원 객체
속성 아이디 이름 전번 아이디가 주식별자가 되어야 함
주문은 상품과 회원을 이어줌 마름모로 표현

이따정리

DDL: Data Definition Language : 데이터 정의어?
자동 commit(확인)되어 복구(되돌리기) 불가

*CREATE TABLE-테이블 구조 생성 명령어

형식 CREATE TABLE 테이블명 (
컬럼명 데이터타입 [제약조건들,...], 컴마를 써야 끝나는거래.. 
컬럼명 데이터타입 [제약조건들,...],
...
); -데이터베이스에서는 소괄호가 영역
-컬럼 생성시 미국식으로 지음? 기억해봐라
제약조건들이 무언지
데이터정의어는 정확히 어떤걸 말하는지...

데이터타입 바차 차 등등 (대소문자 안 가림)

1.문자 타입 : 단위지정이 없는 경우 BYTE기본,CHAR : 글자 수는 2000BYTE이내로 계산해서 해야함...?
char-불변형 문자열(고정형 문자열) : 2000BYTE
VARCHAR2-가변형 문자열 (4000BYTE) 2000자보다 덜....
nvarchar2 - 다국어 지원 가변형 문자열
? 

큰 문자타입(LONG OBJECT) : LOB
CLOB : CHAR자료형의 큰 데이터 타입 :  2GB까지 허용
BLOB : BINARY TYPE의 큰 데이터 타입 이미지나 이런 거 
=지금은 쓰는 경우 거의 없지만 알아두기 옛날 프로그램인 경우에만 사용함


2.숫자 타입
NUMBER - 정수, 실수 다 가능 (어떻게 표기하느냐에 따라)
기존설정 자료 크기보다 무조건 커야 함

문자형이랑 숫자형만 데이터용량 지정해줌
3.데이트타입
DATE - 년,월,일 기준 시,분,초까지 표현 
TIMESTAMP - 년,월,일,시,분,초 밀리세컨드초까지 표현(자바에서처럼? 숫자형타입(숫자처럼 보여짐)으로 저장됨. ) 

숫자타입이랑 숫자형 타입 다른거임???똑같은 거임????뭐임????? 다른거라고 함
자바에서 현재시간을 LONG으로 표현했을때랑 똑같다고 함

커맨드라인 연습하라고 함

자료형에 대한 명시가 없으면 BYTE임

테이블 구조 변경 
ALTER TABLE - 새로운 칼럼 추가

형식
ALTER TABLE 테이블명
ADD (컬럼명 데이터타입,....);


기존 컬럼의 데이터 수정 ( 제약조건 수정도)

ALTER TABLE 테이블명
MODIFY (컬럼명 데이터타입, ...);
해당 컬럼에 전부 데이터가 없는 경우 : 컬럼의 데이터타입 변경 가능, 크기 변경 가능
해당 컬럼에 데이터가 하나라도 있는 경우: 컬럼의 데이터타입은 변경 불가, 크기는 변경 가능 (기존 크기보다 작은 크기로 변경 불가능)

ALTER TABLE 테이블명
	MODIFY (컬럼명 NOT NULL);
	NOT NULL은 이런식으로 변경만 가능
EMP테이블의 직급 컬럼 크기를 30으로 변경

ALTER TABLE EMP01
MODIFY (JOB VARCHAR2(30));

--6바이트로 바꾸기

NUMBER10자리 안됨
커밋함


UPDATE EMP01
SET JOB = '';

커밋함

DEPT01 테이블의 지역명 (LOC)칼럼 크기를 200으로 변경

ALTER TABLE DEPT01
MODIFY (LOC VACHAR2(200));

컬럼 삭제
형식
1.ALTER TABLE 테이블명
DROP COLUMN 컬럼명; 
-한 개 컬럼 삭제

2.ALTER TABLE 테이블명
DROP (컬럼명, 컬럼명2,....); 
-여러 개 컬럼 삭제

*테이블명 변경 RENAME
형식
RENAME 이전테이블명 TO 새테이블명;

테이블삭제는 한 개밖에 안 됨

TRUNCATE TABLE - 테이블의 모든 ROW를 제거
내용만 제거됨 구조만 남음 단 전체내용만 삭제 가능 (일부만 삭제 불가)
자동 커밋되어 복구 불가!
테이블 초기화
형식

	TRUNCATE TABLE 테이블명;
	
	한 줄의 데이터를 인스턴스라고 지칭함
	
	
	제약조건들
	*NOT NULL 제약 조건-필수입력!
	
	CREATE TABLE 테이블명(
	컬럼명, 데이터타입 [제약조건],
	컬럼명2, 데이터타입 [제약조건],
	...
	컬럼명N 데이터타입 [제약조건]
	);
	
	INSERT INTO EMP01
	VALUES(NULL, '', 'SALESMAN', 30);
	
	INSERT INTO EMP01
	VALUES (NULL, 'TOM', 'SALESMAN', 30);
	
	삽입하셈
	
	
데이터 무결성 : 데이터의 결함이 없도록 하는 것
그 방법중에 하나가 제약조건 거는 것
	제약조건 (CONSTRAINT)
	NOT NULL-
	해당 컬럼에 NULL값이 들어오면 안 된다라는 의미
	데이터를 넣을 때 비어있으면 안 됨
	NULL 허용 안 됨
	
	UNIQUE-
	(중복 불가, 유일한 값, NULL 가능,NULL은 중복 가능)
	
	나중에 할 거임
	제약조건 표현 형식 제약조건 DICTIONARY에서 확인
	
	P : PRIMARY KEY(주키)
	R : FOREIGN KEY(외래키)
	U : UNIQUE (유니크)
	C : CHECK 또는 NOT NULL
	
	에러노트?
	
	제약조건 DICTIONARY EMP02의 제약조건을 보는 테이블
	
	SELECT CONSTRANINT_NAME, CONSTRAINT_TYPE, TABLE_NAME
	FROM USER_CONSTRAINTS
	WHERE TABLE_NAME='EMP02';
	COMMIT;
	
	PRIMARY KEY -
	(기본키= 주키)
	UNIQUE + NOT NULL = 중복값 허용이 안 되고 NULL값이 허용이 안 됨.
	
	개념적...뭐시기?
	객체 무결성 : PRIMARY KEY를 떠올려라
	
	
	
	키
	기본키 : 해당 줄(ROW)를 대표할 수 있는 속성값을 의미 ,최소성 만족, 유일성 만족해야함
	후보키 : 해당 줄(ROW)을 대표할 수 있는 속성들을 의미
	(기본키가 될 수 있는 속성들을 의미)-전번,학번,주민번호,이메일,주소
	대체키: 기본키가 아닌 키
	기본키: 학번
	대체키: 주민번호,전화번호,이메일
	
	슈퍼키: 유일성 만족해야함
	외래키: 부모(주종)관계의 부모의 기본키로 존재하는 속성, 유니크키로 존재하는 속성이 자식의 일반 속성으로 존재하는 경우
(식별관계)-참조 무결성 : FOREIGN KEY

	참조키-REFERENCE KEY : 주종관계에서 주인의 일반속성이 하인의 속성으로 존재하는 경우(비식별관계)
	
	복합키 : 기본키의 속성이 2개 이상인 것을 복합키라고 함..? (반드시 테이블 레벨 정의 방법으로만 지정 가능하다.
) - 개모르겠음	
	*컬럼 레벨 정의 방법 : 컬럼안에 제약 조건을 같이 기술하는 것
	
	형식(권장사항) : 식별자 명명규칙
	[테이블명]_[컬럼명]_[제약 조건 유형]
	예 : EMPNO NUMBER(4) PRIMARY KEY
    예: 컬럼명 데이터타입 CONSTRAINT 제약조건명 제약조건타입
	예:EMPNO NUMBER(4) CONSTRAINT EMP_EMPNO_PK PRIMARY KEY,
	
	
	
	
	
	
	
	학생정보 : 이름, 전화번호, 학번, 주민번호, 이메일
	
	*제약조건 추가 (데이터이상급이라)
	ALTER TABLE 테이블명
	ADD CONSTRAINT 제약조건명 제약조건타입(컬럼명);   
	
	NOT NULL은 제약조건으로 추가할 수 없음
	위의 형식으로 추가할 수 없는 제약조건은 NOT NULL이 있다, NOT NULL 제약 조건은 수정만 가능하다.
	
	 -이렇게 제약조건을 수정만 할 수 있음 - 이따 정리
	 
	 *제약조건 삭제
	 ALTER TABLE 테이블명
	 DROP CONSTRAINT 제약조건명; 
	 
	 * CHECK (값의 범위나 조건 지정)
	 -입력 값이 조건에 맞지 않으면 DB에서 받지 않는다. 오류
	 -입력 값의 범위를 지정할 수 있다.
	 -입력할 수 있는 값의 범위를 설정해 줌
	 
	 테이블 생성시 
	 컬럼명 데이터타입 CHECK(범위지정) 
	 - 이름 지정 안 할 때
	 
	 컬럼명 데이터타입 CONSTRAINT 제약조건명 CHECK(범위지정)
	  - 이름 지정 할 때
	 
	 ALTER TABLE [테이블명] 
	 ADD CONSTRAINT [제약조건명] [제약조건] (범위)-수정할 때
	 -데이터 테이블 생성할 때
	 
	 외래키 지정 형식
	 
	 컬럼명 데이터타입  REFERENCE 부모테이블명(부모테이블의 PK 또는 부모테이블의 UNIQUE KEY의 컬럼명);
	 컬럼명을 똑같이 해주지 않아도 됨
	 
	 외래키 중복 허용 됨, NULL 허용됨
	 
	 주종관계에 있는 테이블을 제거하는 방법
	 1.10버전이하
	 
	 DROP TABLE 부모의 테이블명 CASCADE;
	 
	 2.11버전이상
	 DROP TABLE 테이블명 CASCADE CONSTRAINT;
	 
	 PURGE 휴지통 비우기
	 
	 테이블레벨 정의 방식 모름
	 
	 CREATE TABLE EMP08 (
EMPNO NUMBER(4) PRIMARY KEY,
ENAME VARCHAR2(10) NOT NULL,
JOB VARCHAR2(9),
DEPTNO NUMBER(4),
DNAME VARCHAR2(10),
CONSTRAINT EMP08_DEPTNO_FK FOREIGN KEY(DEPTNO, DNAME)
REFERENCES DEPT02 (DEPTNO, DNAME));
	 
	 
	 
	
	
	
	





